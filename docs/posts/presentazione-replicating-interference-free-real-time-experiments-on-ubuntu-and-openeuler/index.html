<!DOCTYPE html>
<html lang="it-it">
  <head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    
    <title>Alessandro Claudio Damo</title>
    <meta name="viewport" content="width=device-width,minimum-scale=1">
    <meta name="description" content="Presentazione Replicating Interference-Free Real-Time Experiments on Ubuntu and openEuler
1. Interpretazione delle richieste d’esame

Tua interpretazione delle richieste della prova d&rsquo;esame (cosa dovevi fare, cosa hai fatto), con risposte a voce ai miei commenti di concetto, che hanno portato alla tue modifiche di revisione

La mia interpretazione delle richieste d’esame è stata la seguente:


cercare di comprendere a fondo i concetti chiave del paper, in particolare il fenomeno dell’interferenza cross-core e i relativi eventi di interferenza">
    <meta name="generator" content="Hugo 0.152.2">
    
    
    
      <meta name="robots" content="noindex, nofollow">
    
    

    
<link rel="stylesheet" href="/ananke/css/main.min.css" >




    


    
      

    

    

    
      <link rel="canonical" href="http://localhost:1313/posts/presentazione-replicating-interference-free-real-time-experiments-on-ubuntu-and-openeuler/">
    

    <meta property="og:url" content="http://localhost:1313/posts/presentazione-replicating-interference-free-real-time-experiments-on-ubuntu-and-openeuler/">
  <meta property="og:site_name" content="Alessandro Claudio Damo">
  <meta property="og:title" content="Alessandro Claudio Damo">
  <meta property="og:description" content="Presentazione Replicating Interference-Free Real-Time Experiments on Ubuntu and openEuler 1. Interpretazione delle richieste d’esame Tua interpretazione delle richieste della prova d’esame (cosa dovevi fare, cosa hai fatto), con risposte a voce ai miei commenti di concetto, che hanno portato alla tue modifiche di revisione
La mia interpretazione delle richieste d’esame è stata la seguente:
cercare di comprendere a fondo i concetti chiave del paper, in particolare il fenomeno dell’interferenza cross-core e i relativi eventi di interferenza">
  <meta property="og:locale" content="it_it">
  <meta property="og:type" content="article">
    <meta property="article:section" content="posts">

  <meta itemprop="name" content="Alessandro Claudio Damo">
  <meta itemprop="description" content="Presentazione Replicating Interference-Free Real-Time Experiments on Ubuntu and openEuler 1. Interpretazione delle richieste d’esame Tua interpretazione delle richieste della prova d’esame (cosa dovevi fare, cosa hai fatto), con risposte a voce ai miei commenti di concetto, che hanno portato alla tue modifiche di revisione
La mia interpretazione delle richieste d’esame è stata la seguente:
cercare di comprendere a fondo i concetti chiave del paper, in particolare il fenomeno dell’interferenza cross-core e i relativi eventi di interferenza">
  <meta itemprop="wordCount" content="2168">
  <meta name="twitter:card" content="summary">
  <meta name="twitter:title" content="Alessandro Claudio Damo">
  <meta name="twitter:description" content="Presentazione Replicating Interference-Free Real-Time Experiments on Ubuntu and openEuler 1. Interpretazione delle richieste d’esame Tua interpretazione delle richieste della prova d’esame (cosa dovevi fare, cosa hai fatto), con risposte a voce ai miei commenti di concetto, che hanno portato alla tue modifiche di revisione
La mia interpretazione delle richieste d’esame è stata la seguente:
cercare di comprendere a fondo i concetti chiave del paper, in particolare il fenomeno dell’interferenza cross-core e i relativi eventi di interferenza">

	
  </head><body class="ma0 avenir bg-near-white development">

    
   
  

  <header>
    <div class="bg-black">
      <nav class="pv3 ph3 ph4-ns" role="navigation">
  <div class="flex-l center items-center justify-between">
    <a href="/" class="f3 fw2 hover-white white-90 dib no-underline">
      
        Alessandro Claudio Damo
      
    </a>
    <div class="flex-l items-center">
      

      
        <ul class="pl0 mr3">
          
          <li class="list f5 f4-ns fw4 dib pr3">
            <a class="hover-white white-90 no-underline" href="/" title="Home page">
              Home
            </a>
          </li>
          
          <li class="list f5 f4-ns fw4 dib pr3">
            <a class="hover-white white-90 no-underline" href="/lavori/" title="Lavori page">
              Lavori
            </a>
          </li>
          
          <li class="list f5 f4-ns fw4 dib pr3">
            <a class="hover-white white-90 no-underline" href="/portfolio/" title="Portfolio page">
              Portfolio
            </a>
          </li>
          
          <li class="list f5 f4-ns fw4 dib pr3">
            <a class="hover-white white-90 no-underline" href="/contact/" title="Contatti page">
              Contatti
            </a>
          </li>
          
        </ul>
      
      <div class="ananke-socials"></div>

    </div>
  </div>
</nav>

    </div>
  </header>



    <main class="pb7" role="main">
      
  
  
  <article class="flex-l mw8 center ph3 flex-wrap justify-between">
    <header class="mt4 w-100">
      <aside class="instapaper_ignoref b helvetica tracked ttu">
          
        Posts
      </aside><div id="sharing" class="mt3 ananke-socials"></div>
<h1 class="f1 athelas mt3 mb1"></h1>
      
      
      

      
      
    </header>
    <div class="nested-copy-line-height lh-copy serif f4 nested-links mid-gray pr4-l w-two-thirds-l"><h1 id="presentazione-replicating-interference-free-real-time-experiments-on-ubuntu-and-openeuler">Presentazione Replicating Interference-Free Real-Time Experiments on Ubuntu and openEuler</h1>
<h3 id="1-interpretazione-delle-richieste-desame"><strong>1. Interpretazione delle richieste d’esame</strong></h3>
<blockquote>
<p>Tua interpretazione delle richieste della prova d&rsquo;esame (cosa dovevi fare, cosa hai fatto), con risposte a voce ai miei commenti di concetto, che hanno portato alla tue modifiche di revisione</p>
</blockquote>
<p>La mia interpretazione delle richieste d’esame è stata la seguente:</p>
<ul>
<li>
<p>cercare di comprendere a fondo i <strong>concetti chiave</strong> del paper, in particolare il fenomeno <strong>dell’interferenza cross-core</strong> e i relativi eventi di interferenza</p>
</li>
<li>
<p>comprendere, replicare e documentare tutti i <strong>meccanismi di isolamento</strong> del kernel Linux</p>
<ul>
<li>Questo è stato un punto molto importante nel paper, perchè gli autori si sono impegnati a unire e documentare i vari meccanismi di isolamento erano fin dal allora frastagliati</li>
</ul>
</li>
<li>
<p>comprendere, replicare e documentare alcuni <strong>esperimenti chiave</strong> del lavoro originale, utilizzando il mio hardware, per verificare se i risultati ottenuti fossero coerenti con quelli degli autori.</p>
</li>
<li>
<p>dimostrare le <strong>conclusioni del paper</strong>, ovvero:</p>
<ul>
<li>Se il sistema linux causa della cross core interfence</li>
<li>Se la cross core interference può generare interferenza temporale causando ritardi e generare interfenza temporale</li>
<li>Se e quanto il lavoro degli autori con openeluer può mitigare questo fenomeno</li>
</ul>
</li>
</ul>
<h4 id="breve-descrizione-di-cosa-cè-nel-lavoro">Breve descrizione di cosa c&rsquo;è nel lavoro</h4>
<p>Nella <strong>sezione 2</strong> ho spiegato i concetti teorici principali e mi sono concentrato sul protagonista, il fenomeno della cross core interference:
Tale è il fenomeno che si verifica nei processori multicore quando l’esecuzione su un core introduce ritardi nell’esecuzione di un altro core, pur senza interazioni dirette tra essi e l&rsquo;isolamento del suddetto core.</p>
<p>Di tale fenomeno poi mi concentro sulle cause sempre <strong>sezione 2</strong> ciò avviene a causa ad eventi di interferenza, che il paper ha classificato e catalogato in tre categorie:</p>
<ul>
<li>
<p>Disturbo dovuto a delle IPI (Inter-Processor Interrupts) non volute</p>
<ul>
<li>si intendono Interruzioni extra nel task real time dovute a processi esterni che aumentano peggioramento della prevedibilità temporale, aumento della latenza di risveglio del task real-time.</li>
</ul>
</li>
<li>
<p>Context switch non voluti</p>
<ul>
<li>Per context switch intediamo l&rsquo;operazione in cui la CPU si sospende l&rsquo;esecuzion del task real time per eseguirne un altri, in questo non voluti e causati da processi esterni (esempio stop dovuti a gestione di eventi di sistema o attivazione di processi di workqueue (coda per i task asincroni) su quel core nonostante non sia necessario li ma in altri core (Linux sbagliatamene per un workqueue di un core li attiva tutti ) )</li>
</ul>
</li>
<li>
<p>TLB flush extra causati da un sovraccarico dei sistemi non isolati</p>
<ul>
<li>Svuotamento della TLB (è una piccola cache che memorizza le traduzioni tra indirizzi virtuali e fisici) nonostante il non esaurimento dovuto alla dal task realtime ma da un sovrauso dovuto ad altri task di sistema</li>
</ul>
</li>
</ul>
<p>Nella stessa sezione ho illustrato nel dettaglio i <strong>meccanismi di isolamento</strong> di Linux, tali meccanismi vengono bucati dalla cross core interfence (dimostreremo che soltato i bug risolti dagli autori del paper mitigano il problema) ma sono comunque molto importanti per il paper (secondo il paper anche la mancata documentazione di questi meccanismi e la loro frammentazione documentaristica è un problema stesso per i sistemi real time in linux) per questo ho deciso di documentarli al meglio e in maniera completa nella sezione implementativa della sezione 7.</p>
<p>Nella <strong>sezione 3</strong> ho descritto e replicato gli esperimenti principali del lavoro originale, presentando i dati e i grafici, mentre nella sezione 7 ho riportato tutti i dettagli implementativi necessari per poterli riprodurre.</p>
<p>Nella <strong>sezione 4</strong> ho approfondito e discusso i dati, in modo da paragonarli e verificare (in più piccolo perchè il mio hw a disposizione era differente) i dati sperimentatli del paper, potendo verificare il trend nonostante ovviamente dati assoluti diversi.</p>
<p>Nella <strong>sezione 5</strong> ho raggiunto le varie conclusioni:</p>
<ul>
<li>Il kernel Linux genera interferenza temporale nonostante i meccanismi di isolamento attivi</li>
<li>Tale fenomeno aggiunge ritardi e latenze di attivazione, peggiorando la schedulabilità e compromettendo la prevedibilità del sistema real time</li>
<li>I bug fix in openeuler mitigano il fenomeno della cross core interfence verificando il lavoro degli autori</li>
</ul>
<blockquote>
<p>L’<strong>interferenza temporale</strong> è il fenomeno per cui un’attività (di sistema o di un altro core) introduce **ritardi **nell’esecuzione di un compito real-time, compromettendo la sua <strong>tempestività e prevedibilità</strong></p>
</blockquote>
<p>Nella <strong>sezione 6</strong> mi sono soffermato sulla dicumentazione delle implemtnazione degli esperimenti e dei già detti meccanismi di isoalamento</p>
<h4 id="cambiamenti-rispetto-alla-versione-inziale">Cambiamenti rispetto alla versione inziale</h4>
<p>Rispetto alla versione iniziale del lavoro, ho riorganizzato la struttura in modo più autonomo e coerente:</p>
<p>Nella <strong>sezione 2</strong> ho approfondito il motivo per cui Linux non potrà mai bloccare totalmente questo fenomeno per via della sua natura frammentata, questo è stato molto importante per chiarire la posizione di Linux rispetto ai sistemi real time causata da questa grave limitazione</p>
<p>La <strong>sezione 3</strong> è diventata una sezione interamente dedicata agli esperimenti — con descrizione, risultati e una prima analisi.</p>
<p>questo è stato fatto con l’obiettivo di allontanarsi dal semplice progetto di replica e critica precedente e rendere il lavoro più autonomo e analitico. In altre parole, non limitarsi a confrontare i miei risultati con quelli del paper, ma <strong>approfondire il significato dei miei esperimenti</strong> e comprendere davvero cosa essi dimostrano.</p>
<p>Il lavoro originario si concentrava soprattutto nel mostrare che <strong>openEuler</strong> gestiva meglio la <em>core interference</em> rispetto ai kernel Linux standard. Con le modifiche introdotte, invece, ho ampliato la prospettiva: non solo <em>quanto</em> openEuler migliori le prestazioni, ma anche <em>perché</em> e <em>in che modo</em> il fenomeno dell’interferenza peggiora le prestazioni dei sistemi real-time.</p>
<p>Per raggiungere questo obiettivo, ho aggiunto a ogni esperimento una <strong>spiegazione teorica</strong> che chiarisce cosa misura e cosa dimostra.</p>
<p>Ad esempio, nella <strong>sezione 3.2</strong> ho analizzato quali e quanti sono gli <strong>eventi di interferenza</strong> che compromettono l’isolamento dei core in Linux.
Come spiegato più volte nel testo, tali eventi possono:</p>
<ul>
<li>ritardare l’attivazione dei task;</li>
<li>causare preemption errate di task ad alta priorità;</li>
<li>aumentare il tempo di blocco delle attività real-time;</li>
<li>e, in generale, peggiorare la <strong>schedulabilità</strong> del sistema.</li>
</ul>
<p>Nelle parti successive ho poi <strong>quantificato la latenza massima sotto interferenza</strong>, per valutare in che misura l’interferenza cross-core influisca sulle attività real-time.
Questo parametro è fondamentale, perché se la <strong>latenza massima</strong> supera il margine di sicurezza della deadline, il task fallisce.</p>
<p>Ho anche analizzato la <strong>distribuzione delle latenze</strong>, un aspetto altrettanto importante: infatti, un’alta frequenza di ritardi indica un sistema meno prevedibile e quindi più soggetto a violazioni di deadline.</p>
<p>Ho dimostrato inoltre, che una latenza più bassa fornisce una garanzia più forte di schedulabilità, poiché consente a un numero maggiore di task real-time di rispettare le proprie scadenze.</p>
<p>Nella <strong>sezione 4</strong> ho mantenuto la <strong>discussione critica</strong> dei dati, confrontandoli con quelli del paper originale.</p>
<p>Grazie a questa nuova versione del lavoro, per fare la conclusione della <strong>sezione 5</strong> è semplicemente bastato riepilogare le varie dimostrazioni:</p>
<p>Una volta verificata la coerenza dei miei dati con quelli del paper, ho dimostrato in modo chiaro <strong>l&rsquo;esistenza</strong> e gli <strong>effetti della core interference</strong>, le <strong>limitazioni dei meccanismi di isolamento</strong> dei core in Linux e, allo stesso tempo, ho confermato che — come già indicavano gli autori — come <strong>openEuler gestisce molto meglio il fenomeno</strong> rispetto sia al kernel Linux RT sia al kernel Vanilla.</p>
<p>Rispetto a prima ho sviluppato delle <strong>conclusioni</strong> vere e proprio sul fenomeno della cross core interfence su Linux, non soffermandomi solo sulla validità dei dati del paper di rifiremento.</p>
<h3 id="2-distanza-concettuale-e-realizzativa-rispetto-agli-autori"><strong>2. Distanza concettuale e realizzativa rispetto agli autori</strong></h3>
<blockquote>
<p>quale distanza concettuale e realizzativa rilevi tra i tuoi esperimenti e quelli degli autori del lavoro di riferimento;</p>
</blockquote>
<p><strong>Sul piano concettuale</strong>, direi che la distanza è piccola: ho seguito gli stessi criteri degli autori, attivando i meccanismi di isolamento, classificando gli eventi di interferenza, e misurando i parametri chiave come la latenza massima o la distribuzione delle latenze.</p>
<p><strong>Sul piano realizzativo</strong>, invece, la distanza è maggiore:</p>
<ul>
<li>Gli autori avevano a disposizione un server <strong>ARM Kunpeng-920</strong> con <strong>quattro nodi NUMA</strong> dove Ogni nodo NUMA ha <strong>24 core</strong> a 2,6 GHz (quindi 24 × 4 = 96 core in totale) Sono riusciti a isolare 24 core per le applicazioni real-time, mentre gli altri 72 core sono utilizzati per carichi di interferenza (non real-time), mentre io avevo un umile i7-3770 con 4 core (8 thread logici). Questo ha reso impossibile replicare esperimenti su larga scala, come task set su 20 core.</li>
<li>Alcuni esperimenti, come quelli della schedulabilità e i programmi generatori di interferenza sono stati creati homemade, seguendo le indicazioni del paper ma ovviamente non con la stessa realizazione</li>
<li>Anche sulla schedulabilità, loro hanno usato SchedCAT su 20 core; io ho fatto per sempificiare un’implementazione custom di RTA su un singolo core. Qui ho dovuto semplificare, ma i trend si sono comunque confermati.</li>
</ul>
<p>In sintesi: <strong>concettualmente vicino, realizzativamente distante</strong>, per i limiti hardware e software.</p>
<h3 id="3-learning-outcome--cosa-ho-appreso"><strong>3. Learning outcome – cosa ho appreso</strong></h3>
<blockquote>
<p>cosa pensi di aver appreso (learning outcome) da questo lavoro</p>
</blockquote>
<p>Da questo lavoro ho imparato moltissimo, sia a livello concettuale che pratico.</p>
<ul>
<li>
<p>Ho capito in profondità cosa si intende per <strong>interferenza cross-core</strong>: tutto ciò che causa e l&rsquo;impatto di tale fenomeno</p>
</li>
<li>
<p>Ho approfondito ancora di più il mondo dei sistemi operativi, quello del mondo real time e quello di Linux</p>
</li>
<li>
<p>Ho visto che Linux fornisce tanti meccanismi di isolamento (isolcpus, nohz_full, irqaffinity…), ma non sono coordinati in modo coerente, e quindi non garantiscono un isolamento vero.</p>
</li>
<li>
<p>Ho appreso quali sono gli eventi che interferivano e generavano interferenza cross-core, e come in parte openEuler ha risolto tale bug specifici (es. gestione workqueue, flush dei device queues, migrazione incoerente dei task)</p>
</li>
<li>
<p>Ho imparato ad usare strumenti totalementi nuovi come <code>ftrace</code>, <code>cyclictest</code>, <code>oslat</code>, <code>stress-ng</code>, ROS2 Performance framework.</p>
</li>
<li>
<p>Ho capito che in real-time la <strong>documentazione degli esperimenti</strong> è quasi importante quanto i risultati. Visto tutto il lavoro che ho eseguito e che ho dovuto fare da capo e da solo mi ha fatto piacere lasciare qualcosa di concreto e utile, permettendo quindi (a differenza di quello che hanno fatto nel paper) magari con una ricerca a qualcuno di interessato migliore e piena documentazione o a qualcuno interessato all&rsquo;ambito.</p>
</li>
<li>
<p>Ho capito anche i difetti linux, e di come presenta limii strutturali per uso real time e non solo: i meccanismi di isolamento (isolcpus, nohz_full, irqaffinity, ecc.) sono frammentati e incoerenti, incapaci di garantire un vero isolamento dei core. Il kernel stesso genera interferenze tramite workqueue, kthread e interrupt mal gestiti, compromettendo la prevedibilità. E a causa della struttura frammentata di Linux non è possibile del tutto sistemare queste problemi</p>
</li>
</ul>
<h3 id="4-autocritica"><strong>4. Autocritica</strong></h3>
<blockquote>
<p>autocritica (cosa hai tralasciato o avresti potuto far meglio)</p>
</blockquote>
<ul>
<li><strong>Esperimenti non completati:</strong> non ho replicato tutte le prove come quelle della schedulabilità oltre alla fixed priority e l&rsquo;altro test real time vero come cFS</li>
<li>Avrai potuto fin dall&rsquo;inizio percorrere una strada più autonoma e puntare ancora di più ad un progetto più autonomo dal paper di riferimento. Puntare meno a mostrare quanto i dati siano validi e coerenti al paper ma invece approfodnire e capire di più gli esperimenti, portando le conclusioni a mostrare il fenomeno della cross core interfence e le sue conseguenze in generale e meno a quanto OpenEuler sia migliore degli altri Kernel a gestire tale fenomeno. Il lavoro finale in questo senso con le dovute modifiche è rimasto un po a meta, avrei voluto portarlo tutto sull&rsquo;ultimo fronte</li>
<li>Avrei potuto cercare altri sistemi più vicini all&rsquo;hardware del paper e meno vecchi come il processore usato nell&rsquo;esperimento</li>
<li>Avrei dovuto cercare di usare tutti e tre i kernel nello stesso sistema operativo: per settimane ho tentato di compilare i tre i kernel nello stesso di numerosi sistemi operativi, invano</li>
</ul>
<h3 id="5-critica-costruttiva-allinsegnamento-e-allesame"><strong>5. Critica costruttiva all’insegnamento e all’esame</strong></h3>
<blockquote>
<p>critica costruttiva all&rsquo;insegnamento e alle sue modalità d&rsquo;esame</p>
</blockquote>
<p>Infine, una riflessione sul corso e sull’esame.</p>
<ul>
<li>È un esame che costringe a sporcarsi le mani, a installare, configurare, misurare, e questo porta a una comprensione molto più profonda e generale rispetto a un esame solo teorico.</li>
<li>Il fatto di lavorare su un paper reale mi ha dato la sensazione di “fare ricerca” più che di fare un compito: è stato stimolante sembrare un collega di persone preparate come quelle del paper</li>
<li>Nel corso del lavoro mi sono immaginato di progettare qualcosa che abbia un minimo di lascito, per quanto umilmente il fatto che il mio lavoro possa in un futuro prossimo lasciare la documentazione a qualcuno di interessato all&rsquo;argomento senza che debba partire da capo e quindi di lasciare qualcosa è stimolante</li>
<li>Ho imparato moltissimo da questa esperienza, da quasi zero ho dovuto cimentarmi nell&rsquo;ambito real time e in altri ambienti, imparando tantissimo su real time kernel e sistemi operativi, specie in maniera pratica dove l&rsquo;insegnamento all&rsquo;università ha spesso un po&rsquo; privato per un insegnamento più teorico</li>
</ul>
<p>Allo stesso tempo, ho trovato un aspetto più &ldquo;negativo&rdquo;</p>
<ul>
<li>Nonostante tutto ciò che ho appreso, ci vuole tantissimo tempo per un simile progetto. Sono stato fortunato ad averlo come ultimo esame del semestre permettendomi di prendermi tutto il tempo di cui avevo bisogno per iniziare un lavoro che con competenze praticamente nulle e ad arrivare ad un lavoro completo e (per me) soddisfacente come questo. Ovviamente questo mi ha permesso di ampliare moltissimo come già detto le mie competenze nell&rsquo;ambito sistemi operativi, kernel e real time, e di sentirmi collega di gente molto preparata come quella del paper di riferimento</li>
</ul>
<ul class="pa0">
  
</ul>
<div class="mt6 instapaper_ignoref">
      
      
      </div>
    </div>

    <aside class="w-30-l mt6-l">




</aside>

  </article>

    </main>
    <footer class="bg-black bottom-0 w-100 pa3" role="contentinfo">
  <div class="flex justify-between">
  <a class="f4 fw4 hover-white white-70 dn dib-ns pv2 ph3 no-underline" href="http://localhost:1313/" >
    &copy;  Alessandro Claudio Damo 2025 
  </a>
    <div><div class="ananke-socials"></div>
</div>
  </div>
</footer>

  </body>
</html>
